
---
title: 효율적인 c++ - #2 스마트 포인터 1
tags: c++
---
# 스코프

스코프(Scope)는 C++에서 변수와 함수의 유효 범위를 정의하는데 사용되는 개념입니다. 스코프를 이해하는 것은 변수의 생존 기간과 접근 가능성을 이해하는 데 도움이 됩니다.

**1. 전역 스코프 (Global Scope):**

- 전역 스코프에서 정의된 변수나 함수는 프로그램 전체에서 접근 가능합니다.
- 전역 변수는 파일 전체에서 사용 가능하며, 다른 파일에서 **`extern`** 키워드를 사용하여 접근할 수 있습니다.

```cpp
cppCopy code
#include <iostream>// 전역 변수
int globalVariable = 10;

// 전역 함수
void globalFunction() {
    std::cout << "Global Function" << std::endl;
}

int main() {
    // 전역 변수 접근
    std::cout << "Global Variable: " << globalVariable << std::endl;

    // 전역 함수 호출
    globalFunction();

    return 0;
}

```

**2. 지역 스코프 (Local Scope):**

- 함수 내에서 선언된 변수와 함수는 해당 함수의 지역 스코프에서만 접근 가능합니다.
- 매개변수 및 함수 내부에서 선언된 변수는 해당 블록 내에서만 유효합니다.

```cpp
cppCopy code
#include <iostream>void localFunction() {
    // 지역 변수
    int localVar = 5;

    // localVar은 localFunction의 지역 스코프에서만 유효
    std::cout << "Local Variable: " << localVar << std::endl;
}

int main() {
    // localVar에 접근 불가 (localFunction의 스코프에서 선언된 변수)
    // std::cout << localVar << std::endl;

    localFunction();

    return 0;
}

```

**3. 블록 스코프 (Block Scope):**

- **`{ }`**로 둘러싸인 블록 내에서 선언된 변수는 해당 블록의 스코프에서만 유효합니다.
- 블록 스코프를 통해 변수의 수명을 제한하고 코드 블록 내에서만 사용할 수 있도록 할 수 있습니다.

```cpp
cppCopy code
#include <iostream>int main() {
    // 외부 블록 변수
    int externalVar = 20;

    {
        // 블록 스코프 내에서만 유효한 변수
        int blockVar = 30;

        std::cout << "Block Variable: " << blockVar << std::endl;
    }

    // blockVar에 접근 불가 (블록 외부에서는 유효하지 않음)
    // std::cout << blockVar << std::endl;

    return 0;
}

```

이렇게 스코프는 변수와 함수의 유효 범위를 제한하고 코드의 가독성 및 유지보수성을 향상시키는데 도움을 줍니다. 함수와 블록을 통해 스코프를 잘 활용하면 변수의 적절한 범위를 유지할 수 있습니다.

스코프와 객체의 메모리 관리는 밀접한 관련이 있습니다. 스코프 내에서 객체가 선언되고 사용되는 경우, 객체의 생존 기간과 메모리 해제가 스코프 규칙에 따라 이루어집니다. 아래는 스코프와 객체 메모리 관리의 관점에서 설명한 예시입니다.

**1. 전역 스코프에서 객체 선언 및 메모리 관리:**

```cpp
cppCopy code
#include <iostream>// 전역 스코프에서 객체 선언
class GlobalObject {
public:
    GlobalObject() {
        std::cout << "Global Object Created" << std::endl;
    }

    ~GlobalObject() {
        std::cout << "Global Object Destroyed" << std::endl;
    }
};

// 전역 변수로 선언된 객체
GlobalObject globalObj;

int main() {
    std::cout << "Inside Main Function" << std::endl;

    // main 함수 내에서 전역 객체에 접근
    return 0;
}

```

- **`GlobalObject`**는 전역 스코프에서 선언되었으며, 프로그램이 시작할 때 생성되고 종료할 때 파괴됩니다.
- 객체의 생성 및 소멸 메시지가 프로그램 실행 전후에 출력됩니다.

**2. 지역 스코프에서 객체 선언 및 메모리 관리:**

```cpp
cppCopy code
#include <iostream>void localFunction() {
    // 지역 스코프에서 객체 선언
    class LocalObject {
    public:
        LocalObject() {
            std::cout << "Local Object Created" << std::endl;
        }

        ~LocalObject() {
            std::cout << "Local Object Destroyed" << std::endl;
        }
    };

    // 지역 변수로 선언된 객체
    LocalObject localObject;
}

int main() {
    std::cout << "Inside Main Function" << std::endl;

    localFunction();

    // main 함수 내에서는 localFunction의 지역 객체에 접근 불가
    return 0;
}

```

- **`LocalObject`**는 **`localFunction`**의 지역 스코프에서 선언되었으며, 함수가 호출될 때 생성되고 함수 실행이 끝날 때 파괴됩니다.
- **`localObject`**의 생존 기간은 **`localFunction`**의 실행 범위에 제한되어 있습니다.

**3. 블록 스코프에서 객체 선언 및 메모리 관리:**

```cpp
cppCopy code
#include <iostream>int main() {
    std::cout << "Inside Main Function" << std::endl;

    {
        // 블록 스코프에서 객체 선언
        class BlockObject {
        public:
            BlockObject() {
                std::cout << "Block Object Created" << std::endl;
            }

            ~BlockObject() {
                std::cout << "Block Object Destroyed" << std::endl;
            }
        };

        // 블록 내에서 선언된 객체
        BlockObject blockObject;
    }

    // 블록 외부에서는 blockObject에 접근 불가
    return 0;
}

```

- **`BlockObject`**는 블록 스코프에서 선언되었으며, 블록이 실행될 때 생성되고 블록이 끝날 때 파괴됩니다.
- **`blockObject`**의 생존 기간은 블록의 실행 범위에 제한되어 있습니다.

스코프가 객체의 메모리 관리와 어떻게 연관되는지 이해함으로써, 변수나 객체의 생존 기간을 효과적으로 관리하고 메모리 누수를 방지할 수 있습니다. C++에서는 객체의 생성자와 소멸자를 활용하여 객체의 생명주기를 제어하므로, 스코프에 따른 메모리 관리에 유의해야 합니다.